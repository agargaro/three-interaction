import*as t from"three";import*as e from"three/examples/jsm/lines/Line2";import*as i from"three/examples/jsm/lines/LineGeometry";import*as r from"three/examples/jsm/lines/LineMaterial";import*as s from"three/examples/jsm/libs/stats.module";var n={d:(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},a={};n.d(a,{WY:()=>d,KX:()=>l,w9:()=>X,LK:()=>p,x$:()=>o,Or:()=>S,ZB:()=>x,z2:()=>ut,H7:()=>y,wO:()=>k,Ex:()=>N,kX:()=>E,SP:()=>Q,td:()=>Z,hP:()=>K,bx:()=>G,l_:()=>w,w_:()=>tt,av:()=>et,Ns:()=>it,or:()=>ct,ll:()=>u,gb:()=>b,iK:()=>lt,cP:()=>dt,DJ:()=>f,RR:()=>M,$C:()=>W,zo:()=>ht,bU:()=>ot,MZ:()=>z,cQ:()=>h,tL:()=>C,N$:()=>q,Xp:()=>P,DS:()=>D,NP:()=>B,bn:()=>V,uF:()=>O,EU:()=>j,Lz:()=>at,SZ:()=>c,zh:()=>L});class o{constructor(){this._set=new Set,this.data=[]}push(t){this._set.has(t.id)||(this._set.add(t.id),this.data.push(t))}has(t){return this._set.has(t.id)}remove(t){const e=this.data.indexOf(t);-1!==e&&this.data.splice(e,1),this._set.delete(t.id)}clear(){this._set=new Set,this.data=[]}}class h{static areVector3Equals(t,e,i=this.eps){return!!(t&&e&&Math.abs(t.x-e.x)<=i&&Math.abs(t.y-e.y)<=i&&Math.abs(t.z-e.z)<=i)}static getSceneFromObj(t){for(;t;){if(t.isScene)return t;t=t.parent}}}function c(t){l.computeAll(t)}h.eps=Math.pow(10,-8);class l{static createProperty(t,e,i){this.bindObjCallback({key:t,callback:this.getBindingCallback(t,i,e)},e),this.bindObjToScene(e)}static getBindingCallback(t,e,i){const r=`__needsUpdate${t}`,s=`__${t}`,n=e.bind(i);return Object.defineProperty(i,t,{get:function(){return!0===this[r]&&(this[s]=n(),this[r]=!1),this[s]}}),()=>{i[r]=!0}}static bindObjCallback(t,e){var i;(null!==(i=e.__boundCallbacks)&&void 0!==i?i:e.__boundCallbacks=[]).push(t),t.callback()}static bindObjToScene(t){var e;if(!t.__manualDetection){const i=h.getSceneFromObj(t);i&&(null!==(e=i.__boundObjects)&&void 0!==e?e:i.__boundObjects=new o).push(t)}}static bindObjAndChildrenToScene(t,e){var i;!t.__manualDetection&&t.__boundCallbacks&&(null!==(i=e.__boundObjects)&&void 0!==i?i:e.__boundObjects=new o).push(t);for(const i of t.children)this.bindObjAndChildrenToScene(i,e)}static unbindObjAndChildrenFromScene(t,e){if(!t.__manualDetection){const i=null==e?void 0:e.__boundObjects;void 0!==i&&i.remove(t)}if(e)for(const i of t.children)this.unbindObjAndChildrenFromScene(i,e)}static executeAllCallbacks(t){for(const e of t.__boundCallbacks)e.callback()}static unbindByKey(t,e){const i=this.getIndexByKey(t,e);-1!==i&&t.__boundCallbacks.splice(i,1)}static getIndexByKey(t,e){const i=t.__boundCallbacks;if(void 0===i)return-1;for(let t=0;t<i.length;t++)if(i[t].key===e)return t;return-1}static computeSingle(t){this.executeAllCallbacks(t)}static computeAll(t){if(t.isScene)this.computeScene(t);else for(const e of t)this.computeScene(e)}static computeScene(t){if(t.__boundObjects)for(const e of t.__boundObjects.data)this.executeAllCallbacks(e)}}const d=()=>function(t,e,i){if(i.get){const r=i.get;delete t[e],delete i.get,delete i.set,i.writable=!0,t.bindProperty(e,r)}else i.value&&t.bindCallback(e,i.value)},u=()=>function(t,e,i){t.prototype.__manualDetection=!0},_=new Set(["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"]);class p{constructor(t){this.enabled=!0,this._domElement=t}update(t,e){var i,r;if(!this.enabled)return;let s;s=t?null!==(i=e.cursorOnDrag)&&void 0!==i?i:"grabbing":e?null!==(r=e.cursorOnHover)&&void 0!==r?r:e.enabled?e.draggable?"grab":"pointer":"default":"default",s!==this._cursor&&(this._cursor=s,_.has(s)?this._domElement.style.cursor=s:this._domElement.style.cursor=`url(${s}), default`)}}const g=(v={Clock:()=>t.Clock,Color:()=>t.Color,EventDispatcher:()=>t.EventDispatcher,InstancedInterleavedBuffer:()=>t.InstancedInterleavedBuffer,InstancedMesh:()=>t.InstancedMesh,InterleavedBufferAttribute:()=>t.InterleavedBufferAttribute,MathUtils:()=>t.MathUtils,Matrix4:()=>t.Matrix4,Object3D:()=>t.Object3D,OrthographicCamera:()=>t.OrthographicCamera,PerspectiveCamera:()=>t.PerspectiveCamera,Plane:()=>t.Plane,Quaternion:()=>t.Quaternion,Raycaster:()=>t.Raycaster,Scene:()=>t.Scene,ShaderMaterial:()=>t.ShaderMaterial,Vector2:()=>t.Vector2,Vector3:()=>t.Vector3,Vector4:()=>t.Vector4,WebGLRenderTarget:()=>t.WebGLRenderTarget,WebGLRenderer:()=>t.WebGLRenderer},m={},n.d(m,v),m);var v,m;class y{get bubbles(){return this._bubbles}get defaultPrevented(){return this._defaultPrevented}get target(){return this._target}get type(){return this._type}constructor(t=!1){this.timeStamp=performance.now(),this.cancelable=t}preventDefault(){this._defaultPrevented=!0}stopImmediatePropagation(){this._stoppedImmediatePropagation=!0}stopPropagation(){this._bubbles=!1}}class b extends y{get altKey(){return this.domEvent.altKey}get button(){return this.domEvent.button}get buttons(){return this.domEvent.buttons}get clientX(){return this.domEvent.clientX}get clientY(){return this.domEvent.clientY}get ctrlKey(){return this.domEvent.ctrlKey}get metaKey(){return this.domEvent.metaKey}get movementX(){return this.domEvent.movementX}get movementY(){return this.domEvent.movementY}get offsetX(){return this.domEvent.offsetX}get offsetY(){return this.domEvent.offsetY}get pageX(){return this.domEvent.pageX}get pageY(){return this.domEvent.pageY}get screenX(){return this.domEvent.screenX}get screenY(){return this.domEvent.screenY}get shiftKey(){return this.domEvent.shiftKey}constructor(t,e,i,r){super(r),this.domEvent=t,this.intersection=e,this.relatedTarget=i}getModifierState(t){return this.domEvent.getModifierState(t)}}class f extends b{get pointerId(){return this.domEvent.pointerId}get width(){return this.domEvent.width}get height(){return this.domEvent.height}get pressure(){return this.domEvent.pressure}get tangentialPressure(){return this.domEvent.tangentialPressure}get tiltX(){return this.domEvent.tiltX}get tiltY(){return this.domEvent.tiltY}get twist(){return this.domEvent.twist}get pointerType(){return this.domEvent.pointerType}get isPrimary(){return this.domEvent.isPrimary}constructor(t,e,i,r){super(t,e,i,r)}getCoalescedEvents(){console.error("getCoalescedEvents not implemented yet.")}getPredictedEvents(){console.error("getPredictedEvents not implemented yet.")}}class x extends f{constructor(t,e=!1,i={},r,s,n){super(t,n,s,e),this.position=r,this.dataTransfer=i}}class M extends y{constructor(t){super(),this.intersection=t}}class C extends b{get deltaMode(){return this.domEvent.deltaMode}get deltaX(){return this.domEvent.deltaX}get deltaY(){return this.domEvent.deltaY}get deltaZ(){return this.domEvent.deltaZ}constructor(t,e){super(t,e)}}class w extends y{get altKey(){return this.domEvent.altKey}get code(){return this.domEvent.code}get ctrlKey(){return this.domEvent.ctrlKey}get key(){return this.domEvent.key}get location(){return this.domEvent.location}get metaKey(){return this.domEvent.metaKey}get repeat(){return this.domEvent.repeat}get shiftKey(){return this.domEvent.shiftKey}constructor(t,e){super(e),this.domEvent=t}getModifierState(t){return this.domEvent.getModifierState(t)}}class E extends y{constructor(t){super(),this.relatedTarget=t}}class z extends y{constructor(t,e,i){super(),this.renderer=t,this.width=e,this.height=i}}class S{constructor(){this._plane=new g.Plane,this._offset=new g.Vector3,this._intersection=new g.Vector3,this._worldPosition=new g.Vector3,this._inverseMatrix=new g.Matrix4,this._startPosition=new g.Vector3,this._targetMatrixWorld=new g.Matrix4,this._findDropTarget=!1}get isDragging(){return!!this._target}get findDropTarget(){return this._findDropTarget}get target(){return this._target}performDrag(t,e,i,r){t.isPrimary&&(this._plane.setFromNormalAndCoplanarPoint(i.getWorldDirection(this._plane.normal),this._worldPosition.setFromMatrixPosition(this._targetMatrixWorld)),e.ray.intersectPlane(this._plane,this._intersection),this._intersection.sub(this._offset).applyMatrix4(this._inverseMatrix),this.triggerEvent("drag",t,this._target,!0,this._intersection,null==r?void 0:r.object,r)._defaultPrevented||this._target.position.equals(this._intersection)||(this._target.position.copy(this._intersection),this._target.updateMatrixWorld(!0)),this.dropTargetEvent(t,r))}startDragging(t,e,i,r){if(t.isPrimary&&r&&r.draggable&&r.clicked){this._target=r,r.dragging=!0,this._startPosition.copy(r.position);const s=this.triggerEvent("dragstart",t,r,!0);return r.updateMatrixWorld(),this._plane.setFromNormalAndCoplanarPoint(i.getWorldDirection(this._plane.normal),this._worldPosition.setFromMatrixPosition(this._target.matrixWorld)),e.ray.intersectPlane(this._plane,this._intersection),this._targetMatrixWorld.copy(this._target.matrixWorld),this._inverseMatrix.copy(this._target.parent.matrixWorld).invert(),this._offset.copy(this._intersection).sub(this._worldPosition.setFromMatrixPosition(this._target.matrixWorld)),this._findDropTarget=s._defaultPrevented,this._findDropTarget&&(this._dataTransfer={}),!0}}cancelDragging(t){this._target&&(this._target.dragging=!1,this.triggerEvent("dragcancel",t,this._target,!0,void 0,this._lastDropTarget)._defaultPrevented||this._target.position.equals(this._startPosition)||this._target.position.copy(this._startPosition),this._lastDropTarget&&this.triggerEvent("dragcancel",t,this._lastDropTarget,!1,void 0,this._target),this.dragEnd(t),this.clear())}stopDragging(t){return!(!this._target||!t.isPrimary||(this._target.dragging=!1,this._lastDropTarget&&this.triggerEvent("drop",t,this._lastDropTarget,!1,void 0,this._target),this.dragEnd(t),this.clear(),0))}dragEnd(t){this.triggerEvent("dragend",t,this._target,!0,void 0,this._lastDropTarget)._defaultPrevented&&this._target.position.copy(this._startPosition)}clear(){this._target=void 0,this._dataTransfer=void 0,this._lastDropTarget=void 0,this._findDropTarget=!1}triggerEvent(t,e,i,r,s,n,a){if(i){const o=new x(e,r,this._dataTransfer,s,n,a);return i.triggerEventAncestor(t,o),o}}dropTargetEvent(t,e){if(this._findDropTarget){const i=null==e?void 0:e.object,r=this._lastDropTarget;this._lastDropTarget=i,i!==r&&(this.triggerEvent("dragleave",t,r,!1,null==e?void 0:e.point,this._target,e),this.triggerEvent("dragenter",t,i,!1,null==e?void 0:e.point,this._target,e)),i&&this.triggerEvent("dragover",t,e.object,!1,e.point,this._target,e)}}}class k{static push(t,e){if(this._allowedEventsSet.has(t)){let i=h.getSceneFromObj(e);if(i)this.pushScene(i,t,e);else{const r=()=>{i=h.getSceneFromObj(e),this.pushScene(i,t,e),e.removeEventListener("added",r)};e.addEventListener("added",r)}}}static pushScene(t,e,i){var r,s;const n=null!==(r=this._events[t.id])&&void 0!==r?r:this._events[t.id]={};(null!==(s=n[e])&&void 0!==s?s:n[e]=new o).push(i)}static remove(t,e){const i=this._events[null==e?void 0:e.id];if(i)for(const e in i)i[e].remove(t);if(t.children)for(const i of t.children)this.remove(i,e)}static dispatchEvent(t,e,i){const r=this._events[null==t?void 0:t.id];if(r&&r[e])for(const t of r[e].data)t.__eventsDispatcher.dispatchEvent(e,i)}}function P(t){const e=t.rotation._onChangeCallback;t.rotation._onChange((()=>{e(),t.__eventsDispatcher.dispatchEvent("rotationchange")}))}function D(t){t.matrix.compose=function(t,e,i){const r=this.elements,s=e._x,n=e._y,a=e._z,o=e._w,h=s+s,c=n+n,l=a+a,d=s*h,u=s*c,_=s*l,p=n*c,g=n*l,v=a*l,m=o*h,y=o*c,b=o*l,f=i._x,x=i._y,M=i._z;return r[0]=(1-(p+v))*f,r[1]=(u+b)*f,r[2]=(_-y)*f,r[3]=0,r[4]=(u-b)*x,r[5]=(1-(d+v))*x,r[6]=(g+m)*x,r[7]=0,r[8]=(_+y)*M,r[9]=(g-m)*M,r[10]=(1-(d+p))*M,r[11]=0,r[12]=t._x,r[13]=t._y,r[14]=t._z,r[15]=1,this}}function O(t){const e=t.quaternion._onChangeCallback;t.quaternion._onChange((()=>{e(),t.__eventsDispatcher.dispatchEvent("rotationchange")}))}function j(t){I(t.position),t.position._onChangeCallback=()=>{t.__eventsDispatcher.dispatchEvent("positionchange")},I(t.scale),t.scale._onChangeCallback=()=>{t.__eventsDispatcher.dispatchEvent("scalechange")}}function I(t){t._x=t.x,t._y=t.y,t._z=t.z,t.isVector3=!0,Object.setPrototypeOf(t,A.prototype),Object.defineProperties(t,{x:{get(){return this._x},set(t){this._x=t,this._onChangeCallback()}},y:{get(){return this._y},set(t){this._y=t,this._onChangeCallback()}},z:{get(){return this._z},set(t){this._z=t,this._onChangeCallback()}}})}k._allowedEventsSet=new Set(["rendererresize","framerendering","animate"]),k._events={};class A{set(t,e,i){return void 0===i&&(i=this._z),this._x=t,this._y=e,this._z=i,this._onChangeCallback(),this}setScalar(t){return this._x=t,this._y=t,this._z=t,this._onChangeCallback(),this}setX(t){return this._x=t,this._onChangeCallback(),this}setY(t){return this._y=t,this._onChangeCallback(),this}setZ(t){return this._z=t,this._onChangeCallback(),this}setComponent(t,e){switch(t){case 0:this._x=e;break;case 1:this._y=e;break;case 2:this._z=e;break;default:throw new Error("index is out of range: "+t)}return this._onChangeCallback(),this}getComponent(t){switch(t){case 0:return this._x;case 1:return this._y;case 2:return this._z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this._x,this._y,this._z)}copy(t,e){return this._x=t.x,this._y=t.y,this._z=t.z,!1!==e&&this._onChangeCallback(),this}add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._onChangeCallback(),this}addScalar(t){return this._x+=t,this._y+=t,this._z+=t,this._onChangeCallback(),this}addVectors(t,e){return this._x=t.x+e.x,this._y=t.y+e.y,this._z=t.z+e.z,this._onChangeCallback(),this}addScaledVector(t,e){return this._x+=t.x*e,this._y+=t.y*e,this._z+=t.z*e,this._onChangeCallback(),this}sub(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._onChangeCallback(),this}subScalar(t){return this._x-=t,this._y-=t,this._z-=t,this._onChangeCallback(),this}subVectors(t,e){return this._x=t.x-e.x,this._y=t.y-e.y,this._z=t.z-e.z,this._onChangeCallback(),this}multiply(t){return this._x*=t.x,this._y*=t.y,this._z*=t.z,this._onChangeCallback(),this}multiplyScalar(t,e){return this._x*=t,this._y*=t,this._z*=t,!1!==e&&this._onChangeCallback(),this}multiplyVectors(t,e){return this._x=t.x*e.x,this._y=t.y*e.y,this._z=t.z*e.z,this._onChangeCallback(),this}applyEuler(t){return this.applyQuaternion(T.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(T.setFromAxisAngle(t,e))}applyMatrix3(t,e){const i=this._x,r=this._y,s=this._z,n=t.elements;return this._x=n[0]*i+n[3]*r+n[6]*s,this._y=n[1]*i+n[4]*r+n[7]*s,this._z=n[2]*i+n[5]*r+n[8]*s,!1!==e&&this._onChangeCallback(),this}applyNormalMatrix(t){return this.applyMatrix3(t,!1).normalize()}applyMatrix4(t,e){const i=this._x,r=this._y,s=this._z,n=t.elements,a=1/(n[3]*i+n[7]*r+n[11]*s+n[15]);return this._x=(n[0]*i+n[4]*r+n[8]*s+n[12])*a,this._y=(n[1]*i+n[5]*r+n[9]*s+n[13])*a,this._z=(n[2]*i+n[6]*r+n[10]*s+n[14])*a,!1!==e&&this._onChangeCallback(),this}applyQuaternion(t){const e=this._x,i=this._y,r=this._z,s=t.x,n=t.y,a=t.z,o=t.w,h=o*e+n*r-a*i,c=o*i+a*e-s*r,l=o*r+s*i-n*e,d=-s*e-n*i-a*r;return this._x=h*o+d*-s+c*-a-l*-n,this._y=c*o+d*-n+l*-s-h*-a,this._z=l*o+d*-a+h*-n-c*-s,this._onChangeCallback(),this}project(t){return this.applyMatrix4(t.matrixWorldInverse,!1).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse,!1).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this._x,i=this._y,r=this._z,s=t.elements;return this._x=s[0]*e+s[4]*i+s[8]*r,this._y=s[1]*e+s[5]*i+s[9]*r,this._z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this._x/=t.x,this._y/=t.y,this._z/=t.z,this._onChangeCallback(),this}divideScalar(t,e){return this.multiplyScalar(1/t,e)}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this._z=Math.min(this._z,t.z),this._onChangeCallback(),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this._z=Math.max(this._z,t.z),this._onChangeCallback(),this}clamp(t,e){return this._x=Math.max(t.x,Math.min(e.x,this._x)),this._y=Math.max(t.y,Math.min(e.y,this._y)),this._z=Math.max(t.z,Math.min(e.z,this._z)),this._onChangeCallback(),this}clampScalar(t,e){return this._x=Math.max(t,Math.min(e,this._x)),this._y=Math.max(t,Math.min(e,this._y)),this._z=Math.max(t,Math.min(e,this._z)),this._onChangeCallback(),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1,!1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this._x=Math.floor(this._x),this._y=Math.floor(this._y),this._z=Math.floor(this._z),this._onChangeCallback(),this}ceil(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this._z=Math.ceil(this._z),this._onChangeCallback(),this}round(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this._z=Math.round(this._z),this._onChangeCallback(),this}roundToZero(){return this._x=this._x<0?Math.ceil(this._x):Math.floor(this._x),this._y=this._y<0?Math.ceil(this._y):Math.floor(this._y),this._z=this._z<0?Math.ceil(this._z):Math.floor(this._z),this._onChangeCallback(),this}negate(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this._onChangeCallback(),this}dot(t){return this._x*t.x+this._y*t.y+this._z*t.z}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}manhattanLength(){return Math.abs(this._x)+Math.abs(this._y)+Math.abs(this._z)}normalize(t){return this.divideScalar(this.length()||1,t)}setLength(t){return this.normalize(!1).multiplyScalar(t)}lerp(t,e){return this._x+=(t.x-this._x)*e,this._y+=(t.y-this._y)*e,this._z+=(t.z-this._z)*e,this._onChangeCallback(),this}lerpVectors(t,e,i){return this._x=t.x+(e.x-t.x)*i,this._y=t.y+(e.y-t.y)*i,this._z=t.z+(e.z-t.z)*i,this._onChangeCallback(),this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,s=t.z,n=e.x,a=e.y,o=e.z;return this._x=r*o-s*a,this._y=s*n-i*o,this._z=i*a-r*n,this._onChangeCallback(),this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t,!1).multiplyScalar(i)}projectOnPlane(t){return R.copy(this).projectOnVector(t),this.sub(R)}reflect(t){return this.sub(R.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(g.MathUtils.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this._x-t.x,i=this._y-t.y,r=this._z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this._x-t.x)+Math.abs(this._y-t.y)+Math.abs(this._z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this._x=r*Math.sin(i),this._y=Math.cos(e)*t,this._z=r*Math.cos(i),this._onChangeCallback(),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this._x=t*Math.sin(e),this._y=i,this._z=t*Math.cos(e),this._onChangeCallback(),this}setFromMatrixPosition(t){const e=t.elements;return this._x=e[12],this._y=e[13],this._z=e[14],this._onChangeCallback(),this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this._x=e,this._y=i,this._z=r,this._onChangeCallback(),this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._onChangeCallback(),this}setFromColor(t){return this._x=t.r,this._y=t.g,this._z=t.b,this._onChangeCallback(),this}equals(t){return t.x===this._x&&t.y===this._y&&t.z===this._z}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._onChangeCallback(),this}random(){return this._x=Math.random(),this._y=Math.random(),this._z=Math.random(),this._onChangeCallback(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-Math.pow(t,2));return this._x=i*Math.cos(e),this._y=i*Math.sin(e),this._z=t,this._onChangeCallback(),this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z}}const R=new g.Vector3,T=new g.Quaternion,L={};function V(t){t.__vec3Patched||(j(t),D(t),t.__vec3Patched=!0)}function B(t){t.__rotationPatched||(O(t),P(t),t.__rotationPatched=!0)}g.Object3D.prototype.activable=!0,g.Object3D.prototype.active=!1,g.Object3D.prototype.clicked=!1,g.Object3D.prototype.dragging=!1,g.Object3D.prototype.draggable=!1,g.Object3D.prototype.hovered=!1,g.Object3D.prototype.enabled=!0,g.Object3D.prototype.interceptByRaycaster=!0,Object.defineProperty(g.Object3D.prototype,"activableObj",{get:function(){let t=this;for(;t&&!t.activable;)t=t.parent;return t}}),g.Object3D.prototype.bindEvent=function(t,e){if("string"==typeof t)return this.__eventsDispatcher.addEventListener(t,e);for(const i of t)this.__eventsDispatcher.addEventListener(i,e);return e},g.Object3D.prototype.hasBoundEvent=function(t,e){return this.__eventsDispatcher.hasEventListener(t,e)},g.Object3D.prototype.unbindEvent=function(t,e){this.__eventsDispatcher.removeEventListener(t,e)},g.Object3D.prototype.triggerEvent=function(t,e){this.__eventsDispatcher.dispatchDOMEvent(t,e)},g.Object3D.prototype.triggerEventAncestor=function(t,e){this.__eventsDispatcher.dispatchDOMEventAncestor(t,e)},Object.defineProperty(g.Object3D.prototype,"userData",{set:function(t){this.__eventsDispatcher=new N(this),Object.defineProperty(this,"userData",{value:t,writable:!0})}}),g.Object3D.prototype.setManualDetectionMode=function(){this.__boundCallbacks?console.error("Cannot change detectChangesMode if a binding is already created."):this.__manualDetection=!0},g.Object3D.prototype.detectChanges=function(){l.computeSingle(this)},g.Object3D.prototype.bindProperty=function(t,e,i=!0){if(!i||this.parent||this.isScene)l.createProperty(t,this,e);else{const i=()=>{l.createProperty(t,this,e),this.removeEventListener("added",i)};this.addEventListener("added",i)}return this},g.Object3D.prototype.unbindProperty=function(t){return l.unbindByKey(this,t),this};const F=g.Object3D.prototype.add;g.Object3D.prototype.add=function(t){if(F.call(this,...arguments),1==arguments.length&&t!==this&&(null==t?void 0:t.isObject3D)){const e=h.getSceneFromObj(this);l.bindObjAndChildrenToScene(t,e)}return this};const U=g.Object3D.prototype.remove;function q(t){if(t.isScene)return;const e=h.getSceneFromObj(t);t.parent&&e.__dropTargets.push(t)}g.Object3D.prototype.remove=function(t){if(1==arguments.length&&-1!==this.children.indexOf(t)){const e=h.getSceneFromObj(this);l.unbindObjAndChildrenFromScene(t,e),k.remove(t,e)}return U.call(this,...arguments),this},g.Scene.prototype.activable=!1,g.Scene.prototype.__dropTargets=new o;class N{constructor(t){this.parent=t,this._listeners={}}addEventListener(t,e){return this._listeners[t]||(this._listeners[t]=[],this.parent.isObject3D&&(k.push(t,this.parent),"positionchange"===t||"scalechange"===t?V(this.parent):"rotationchange"===t?B(this.parent):"drop"!==t&&"dragenter"!==t&&"dragleave"!==t&&"dragover"!==t||q(this.parent))),-1===this._listeners[t].indexOf(e)&&this._listeners[t].push(e),e}hasEventListener(t,e){var i,r;return!(null===(r=null===(i=this._listeners[t])||void 0===i?void 0:i.indexOf(e))||void 0===r||!r)}removeEventListener(t,e){var i,r;const s=null!==(r=null===(i=this._listeners[t])||void 0===i?void 0:i.indexOf(e))&&void 0!==r?r:-1;-1!==s&&this._listeners[t].splice(s,1)}dispatchDOMEvent(t,e){e._bubbles=!1,e._stoppedImmediatePropagation=!1,e._defaultPrevented=!1,e._type=t,e._target=this.parent,this._dispatchDOMEvent(t,e)}_dispatchDOMEvent(t,e){if(!this._listeners[t])return;const i=e.currentTarget=this.parent;for(const r of this._listeners[t]){if(e._stoppedImmediatePropagation)break;r.call(i,e)}}dispatchDOMEventAncestor(t,e){let i=this.parent;for(e._bubbles=!0,e._stoppedImmediatePropagation=!1,e._defaultPrevented=!1,e._type=t,e._target=i;i&&e._bubbles;)i.__eventsDispatcher._dispatchDOMEvent(t,e),i=i.parent}dispatchEvent(t,e){if(this._listeners[t])for(const i of this._listeners[t])i.call(this.parent,e)}}class K{constructor(){this._items=[]}enqueue(t){if("pointermove"===t.type)for(let e=this._items.length-1;e>=0;e--){const i=this._items[e];if(i.pointerId===t.pointerId){const r=i.type;if("pointermove"===r)return void(this._items[e]=t);if("pointercancel"===r||"pointerdown"===r||"pointerout"===r||"pointerover"===r||"pointerup"===r)break}}this._items.push(t)}dequeue(){const t=this._items;return this._items=[],t}}class W{constructor(t){this.raycaster=new g.Raycaster,this.intersectionSortComparer=(t,e)=>t.distance-e.distance,this.raycastGPU=!1,this._pickingTexture=new g.WebGLRenderTarget(1,1),this._pointer=new g.Vector2,this._pointerNormalized=new g.Vector2,this._renderManager=t,this._renderer=t.renderer}getIntersections(t,e,i){const r=[];this._pointer.set(t.offsetX,t.offsetY),this._renderManager.getNormalizedMouse(this._pointer,this._pointerNormalized);const s=this._renderManager.activeScene,n=this._renderManager.activeCamera;return this.raycaster.setFromCamera(this._pointerNormalized,n),e?i&&(this.raycastGPU?this.raycastObjectsGPU(s,n,r):this.raycastObjectsDropTarget(s,r)):this.raycastGPU?this.raycastObjectsGPU(s,n,r):this.raycastObjects(s,r),r.sort(this.intersectionSortComparer),r}raycastObjects(t,e=[]){if(t.interceptByRaycaster&&t.visible){for(const i of t.children)this.raycastObjects(i,e);let i=e.length;for(t.objectsToRaycast?this.raycaster.intersectObjects(t.objectsToRaycast,!1,e):this.raycaster.intersectObject(t,!1,e);e.length>i;){const r=e[i];r.hitbox=r.object,r.object=t,i++}}return e}raycastObjectsDropTarget(t,e=[]){for(const i of t.__dropTargets.data)if(i.visible){let t=e.length;for(i.objectsToRaycast?this.raycaster.intersectObjects(i.objectsToRaycast,!1,e):this.raycaster.intersectObject(i,!1,e);e.length>t;){const r=e[t];r.hitbox=r.object,r.object=i,t++}}return e}raycastObjectsGPU(t,e,i=[]){const r=this._renderer.domElement.width,s=this._renderer.domElement.height;e.setViewOffset(r,s,this._pointer.x*devicePixelRatio,this._pointer.y*devicePixelRatio,1,1),this._renderer.setRenderTarget(this._pickingTexture),this._renderer.render(t,e),e.clearViewOffset();const n=new Uint8Array(4);this._renderer.readRenderTargetPixels(this._pickingTexture,0,0,1,1,n);const a=n[0]<<16|n[1]<<8|n[2];this._renderer.setRenderTarget(null);const o=L[a];if(o){o.objectsToRaycast?this.raycaster.intersectObjects(o.objectsToRaycast,!1,i):this.raycaster.intersectObject(o,!1,i);for(const t of i)t.hitbox=t.object,t.object=o}return i}}class G{constructor(t){this.enabled=!0,this.continousRaycasting=!0,this.continousRaycastingDrop=!0,this.disactiveWhenClickOut=!1,this.intersection={},this._queue=new K,this._dragManager=new S,this._lastPointerDownExt={},this._lastPointerDown={},this._lastPointerMove={},this._lastIntersection={},this._mouseDetected=!1,this._isTapping=!1,this._renderManager=t;const e=t.renderer;this.registerRenderer(e),this._cursorManager=new p(e.domElement),this.raycasterManager=new W(t)}registerRenderer(t){t instanceof g.WebGLRenderer?(t.domElement.addEventListener("pointermove",(t=>this._mouseDetected="mouse"===t.pointerType)),t.domElement.addEventListener("pointerdown",(t=>this._isTapping="mouse"!==t.pointerType&&t.isPrimary)),t.domElement.addEventListener("pointerup",(t=>this._isTapping&&(this._isTapping=!t.isPrimary))),this.bindEvents(t)):console.error("Renderer not supported.")}bindEvents(t){const e=t.domElement;e.addEventListener("pointercancel",this.enqueue.bind(this)),e.addEventListener("pointerdown",this.enqueue.bind(this)),e.addEventListener("pointermove",this.enqueue.bind(this)),e.addEventListener("pointerup",this.enqueue.bind(this)),e.addEventListener("wheel",this.enqueue.bind(this)),document.addEventListener("keydown",this.enqueue.bind(this)),document.addEventListener("keyup",this.enqueue.bind(this))}enqueue(t){this._queue.enqueue(t)}update(){var t;if(this.enabled){this._primaryRaycasted=!1;for(const t of this._queue.dequeue())this.computeQueuedEvent(t);this.pointerIntersection(),this._cursorManager.update(this._dragManager.target,null===(t=this.intersection[this._primaryIdentifier])||void 0===t?void 0:t.object)}}raycastScene(t){if(t.isPrimary&&(this._primaryRaycasted=!0,this._primaryIdentifier=t.pointerId),this._dragManager.isDragging){const e=this.raycasterManager.getIntersections(t,!0,this._dragManager.findDropTarget);this.intersectionDropTarget=e[0]}else{this._lastIntersection[t.pointerId]=this.intersection[t.pointerId];const e=this.raycasterManager.getIntersections(t,!1,!1);this.intersection[t.pointerId]=e[0]}}triggerPointer(t,e,i,r){if(i){const s=new f(e,this.intersection[e.pointerId],r);i.triggerEvent(t,s)}}triggerAncestorPointer(t,e,i,r,s){if(i){const n=new f(e,this.intersection[e.pointerId],r,s);return i.triggerEventAncestor(t,n),n}}triggerAncestorWheel(t,e){if(e){const i=new C(t,e);e.object.triggerEventAncestor("wheel",i)}}triggerAncestorKeyboard(t,e,i){if(this.activeObject){const r=new w(e,i);return this.activeObject.triggerEventAncestor(t,r),r}}computeQueuedEvent(t){switch(t.type){case"pointermove":return this.pointerMove(t);case"pointerdown":return this.pointerDown(t);case"pointerup":return this.pointerUp(t);case"wheel":return this.wheel(t);case"keydown":return this.keyDown(t);case"keyup":return this.keyUp(t);default:console.error("Error: computeEvent failed.")}}isMainClick(t){return t.isPrimary&&("mouse"===t.pointerType&&0===t.button||"mouse"!==t.pointerType)}pointerDown(t){var e;"mouse"!==t.pointerType&&this.pointerMove(t);const i=null===(e=this.intersection[t.pointerId])||void 0===e?void 0:e.object,r=this.triggerAncestorPointer("pointerdown",t,i,void 0,!0);this._lastPointerDown[t.pointerId]=t,this._lastPointerDownExt[t.pointerId]=r,i&&(i.clicked=this.isMainClick(t)),(null==r?void 0:r._defaultPrevented)||this.focus(t,i)}pointerMove(t){var e;if(this._lastPointerMove[t.pointerId]=t,this.raycastScene(t),this._dragManager.isDragging)this._dragManager.performDrag(t,this.raycasterManager.raycaster,this._renderManager.activeCamera,this.intersectionDropTarget);else{this.pointerOutOver(t);const i=null===(e=this.intersection[t.pointerId])||void 0===e?void 0:e.object;this._dragManager.startDragging(t,this.raycasterManager.raycaster,this._renderManager.activeCamera,i)||this.triggerAncestorPointer("pointermove",t,i)}}pointerIntersection(){if(this._dragManager.isDragging){if(!this._primaryRaycasted&&this._dragManager.findDropTarget&&this.continousRaycastingDrop){const t=this._lastPointerMove[this._primaryIdentifier]||this._lastPointerDown[this._primaryIdentifier];this.raycastScene(t),this._dragManager.performDrag(t,this.raycasterManager.raycaster,this._renderManager.activeCamera,this.intersectionDropTarget)}}else if(this.continousRaycasting&&(this._mouseDetected||this._isTapping)){if(!this._primaryRaycasted){const t=this._lastPointerMove[this._primaryIdentifier]||this._lastPointerDown[this._primaryIdentifier];this.raycastScene(t),this.pointerOutOver(t)}const t=this.intersection[this._primaryIdentifier];null==t||t.object.triggerEventAncestor("pointerintersection",new M(t))}}wheel(t){this.triggerAncestorWheel(t,this.intersection[this._primaryIdentifier])}pointerOutOver(t){var e,i;const r=null===(e=this.intersection[t.pointerId])||void 0===e?void 0:e.object,s=null===(i=this._lastIntersection[t.pointerId])||void 0===i?void 0:i.object;t.isPrimary&&(s&&(s.hovered=!1),r&&(r.hovered=!0)),r!==s&&(this.triggerAncestorPointer("pointerout",t,s,r),this.triggerPointer("pointerleave",t,s,r),this.triggerAncestorPointer("pointerover",t,r,s),this.triggerPointer("pointerenter",t,r,s))}pointerUp(t){var e,i;const r=null===(e=this.intersection[t.pointerId])||void 0===e?void 0:e.object,s=null===(i=this._lastPointerDownExt[t.pointerId])||void 0===i?void 0:i._target;let n;"mouse"!==t.pointerType&&r&&(r.hovered=!1,this.triggerAncestorPointer("pointerout",t,r),this.triggerPointer("pointerleave",t,r)),this._dragManager.stopDragging(t)||(this.triggerAncestorPointer("pointerup",t,r,s),r&&r===s&&(n=this.triggerAncestorPointer("click",t,r))),this._lastClick=this.dblClick(t,n,r),s&&this.isMainClick(t)&&(s.clicked=!1)}dblClick(t,e,i){if(this.isMainClick(t)&&e){const r=this._lastClick;return i===(null==r?void 0:r._target)&&t.timeStamp-r.timeStamp<=300?void this.triggerAncestorPointer("dblclick",t,i):e}}keyDown(t){const e=this.triggerAncestorKeyboard("keydown",t,!0);(null==e?void 0:e._defaultPrevented)||"Escape"!==t.key&&"Esc"!==t.key||this._dragManager.cancelDragging(this._lastPointerMove[this._primaryIdentifier])}keyUp(t){this.triggerAncestorKeyboard("keyup",t,!1)}focus(t,e){if(!t.isPrimary)return;const i=null==e?void 0:e.activableObj;if(this.activeObject!==i){if(!this.disactiveWhenClickOut&&!i)return;const t=new E(i),e=this.activeObject;e&&(e.active=!1,e.triggerEventAncestor("blur",t),e.triggerEvent("focusout",t)),i&&(i.active=!0,t.relatedTarget=e,i.triggerEventAncestor("focus",t),i.triggerEvent("focusin",t)),this.activeObject=i}}}class X extends g.ShaderMaterial{constructor(t){super({uniforms:{map:{value:null==t?void 0:t.map},resolution:{value:null==t?void 0:t.resolution},time:{value:0}}}),this.vertexShader="\n    varying vec3 radius;\n    varying vec3 vNormal;\n    varying vec2 vUv;\n  \n    uniform float time;\n  \n    void main() {\n      vec3 noise = vec3(abs(sin(time / 2.0 + position.x)) * 0.1, abs(cos(time / 2.0 + position.x)) * 0.1 ,0.0);\n      vUv = uv;\n      vNormal = vec3(0.0 , 0.0,-1.0);\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position + noise, 1.0);\n    }",this.fragmentShader="\n    uniform sampler2D map;\n    uniform vec2 resolution;\n    varying vec3 vNormal;\n    varying vec2 vUv;\n  \n    vec3 getNormal(vec2 point2D, float radius) {\n      float x = (point2D.x - 0.5) * 2.0 * radius;\n      float y = (point2D.y - 0.5) * 2.0 * radius;\n      float z = sqrt(max(0.0, radius * radius - x * x - y * y));\n          return vec3(x, y, z); \n      }\n  \n  \n    void main() {\n      vec2 uv = gl_FragCoord.xy / resolution.xy;\n  \n      vec3 normal =  getNormal(vUv,1.0);\n  \n      // gl_FragColor = vec4(0.0 ,vUv.x,0.0,1.0);\n      // return;\n  \n      float iorRatioR = 0.9900;\n      float iorRatioG = 0.9910;\n      float iorRatioB = 0.9920;\n      vec2 center = vec2(0.5,0.5);\n      float distance = distance(center,vUv);\n  \n      if(distance > 0.495){\n          gl_FragColor = vec4(0.0,0.0,0.0,0.1);\n          return;\n      }\n  \n      \n  \n      vec3 refractVecR = refract(vNormal,normal,iorRatioR);\n      vec3 refractVecG = refract(vNormal,normal,iorRatioG);\n      vec3 refractVecB = refract(vNormal,normal,iorRatioB);\n      vec4 color = vec4(0.0);\n      color.r = texture2D(map, uv.xy + refractVecR.xy).r;\n      color.g = texture2D(map, uv.xy + refractVecG.xy).g;\n      color.b = texture2D(map, uv.xy + refractVecB.xy).b;\n      color.a = 1.0;\n      gl_FragColor = color;\n      }"}setResolution(t,e){this.uniforms.resolution.value||(this.uniforms.resolution.value=new g.Vector2),this.uniforms.resolution.value.set(t,e)}setTexture(t){this.uniforms.map.value=t}setTime(t){this.uniforms.time.value=t}}class Q extends g.InstancedMesh{constructor(t,e,i,r,s){super(t,e,i),this.instances=[],this._tempMatrix=new g.Matrix4,this._tempColor=new g.Color,this._needsUpdate=!1,"number"==typeof s&&(s=this._tempColor.setHex(s));for(let t=0;t<i;t++)this.instances.push(new r(this,t,s));this.bindEvent("pointerintersection",(t=>{this.instances[t.intersection.instanceId].triggerEvent("pointerintersection",t)})),this.bindEvent("animate",(t=>{for(let e=0;e<this.count;e++)this.instances[e].triggerEvent("animate",t)}))}}let Y=1;class Z extends g.EventDispatcher{get activableObj(){return this.activable?this:this.parent.activableObj}constructor(t,e,i){super(),this.position=new g.Vector3,this.scale=new g.Vector3(1,1,1),this.quaternion=new g.Quaternion,this.activable=!1,this.active=!1,this.activeUntilParent=!1,this.hovered=!1,this.enabled=!0,this.id=Y++,this.parent=t,this.instanceId=e,this.__eventsDispatcher=new N(this),i&&this.setColor(i)}setColor(t){"number"==typeof t?this.parent.setColorAt(this.instanceId,this.parent._tempColor.setHex(t)):this.parent.setColorAt(this.instanceId,t),this.parent.instanceColor.needsUpdate=!0}getColor(t=this.parent._tempColor){return this.parent.getColorAt(this.instanceId,t),t}updateMatrix(){const t=this.parent._tempMatrix;t.compose(this.position,this.quaternion,this.scale),this.parent.setMatrixAt(this.instanceId,t),this.parent.instanceMatrix.needsUpdate=!0}bindEvent(t,e){if("string"==typeof t)return this.__eventsDispatcher.addEventListener(t,e);for(const i of t)this.__eventsDispatcher.addEventListener(i,e);return e}hasBoundEvent(t,e){return this.__eventsDispatcher.hasEventListener(t,e)}unbindEvent(t,e){this.__eventsDispatcher.removeEventListener(t,e)}triggerEvent(t,e){this.__eventsDispatcher.dispatchEvent(t,e)}}const $=(t=>{var e={};return n.d(e,t),e})({Line2:()=>e.Line2}),H=(t=>{var e={};return n.d(e,t),e})({LineGeometry:()=>i.LineGeometry}),J=(t=>{var e={};return n.d(e,t),e})({LineMaterial:()=>r.LineMaterial});class tt extends $.Line2{constructor(t=new J.LineMaterial){super(new H.LineGeometry,t),this.bindEvent("rendererresize",(t=>{this.material.resolution.set(t.width,t.height)}))}updatePoints(t,...e){const i=this.geometry.attributes.instanceStart.array;for(const r of e){const e=6*(r-1)+3;i[e]=t[r].x,i[e+1]=t[r].y,i[e+2]=t[r].z,i[e+3]=t[r].x,i[e+4]=t[r].y,i[e+5]=t[r].z}this.geometry.attributes.instanceStart.needsUpdate=!0,this.geometry.attributes.instanceEnd.needsUpdate=!0,this.update()}setPoints(t){this.createAttributes(t)||(this.fillFloat32Array(t,this.geometry.attributes.instanceStart.array),this.geometry.attributes.instanceStart.needsUpdate=!0,this.geometry.attributes.instanceEnd.needsUpdate=!0),this.update()}createAttributes(t){var e;if((null===(e=this.geometry.getAttribute("instanceStart"))||void 0===e?void 0:e.count)!==t.length-1){const e=this.fillFloat32Array(t),i=new g.InstancedInterleavedBuffer(e,6,1);return this.geometry.setAttribute("instanceStart",new g.InterleavedBufferAttribute(i,3,0)),this.geometry.setAttribute("instanceEnd",new g.InterleavedBufferAttribute(i,3,3)),delete this.geometry._maxInstanceCount,!0}}fillFloat32Array(t,e){var i,r;null!=e||(e=new Float32Array(3*(t.length-1)*2));for(let s=0;s<t.length-1;s++){const n=6*s;e[n]=t[s].x,e[n+1]=t[s].y,e[n+2]=null!==(i=t[s].z)&&void 0!==i?i:0,e[n+3]=t[s+1].x,e[n+4]=t[s+1].y,e[n+5]=null!==(r=t[s+1].z)&&void 0!==r?r:0}return e}update(){this.geometry.computeBoundingBox(),this.geometry.computeBoundingSphere()}}class et extends tt{constructor(t,e){super(),t.bindEvent("positionchange",(()=>{this._needsUpdate=!0})),e.bindEvent("positionchange",(()=>{this._needsUpdate=!0})),this.bindEvent("animate",(()=>{this._needsUpdate&&(this.setPoints([t.position,e.position]),this._needsUpdate=!1)}))}}class it extends g.ShaderMaterial{constructor(t,e,i){super(),this.vertexShader="\n        varying vec2 vUv;\n\n\t\tvoid main() {\n            vUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t}",this.fragmentShader="\n        uniform vec3 empty;\n        uniform vec3 fill;\n        uniform float percentage;\n        uniform float time;\n        uniform float height;\n        varying vec2 vUv;\n\n        void main() {\n            if (vUv.y > percentage) {\n                gl_FragColor = vec4(empty + (sin(vUv.y * height + time) * 0.2 - 0.1), 1.0);\n            } else {\n                gl_FragColor = vec4(fill + (cos(vUv.y * height + time) * 0.2 - 0.1), 1.0);\n            }\n        }",this.uniforms={empty:{value:new g.Color(e)},fill:{value:new g.Color(i)},percentage:{value:0},time:{value:0},height:{value:t}}}setPercentage(t){this.uniforms.percentage.value=t}}const rt=(t=>{var e={};return n.d(e,t),e})({default:()=>s.default}),st=new g.Vector4,nt=new g.Vector4;function at(t){const e=t.render.bind(t);t.render=function(t,i){this.getViewport(st),function(t,e){nt.z===st.z&&nt.w===st.w||(nt.copy(st),k.dispatchEvent(e,"rendererresize",new z(t,st.z,st.w)))}(this,t),this.__isGPUPicking&&(this.__isGPUPicking=!1),e(t,i)}}class ot{constructor(t,e){var i,r;this.viewport={left:0,bottom:0,width:0,height:0},this._rendererSize=e,this.scene=t.scene,this.camera=t.camera,this.viewportNormalized=t.viewport,this.name=t.name,this.visible=null===(i=t.visible)||void 0===i||i,this.enabled=null===(r=t.enabled)||void 0===r||r,this.backgroundAlpha=t.backgroundAlpha,this.backgroundColor="number"==typeof t.backgroundColor?new g.Color(t.backgroundColor):t.backgroundColor,this._onBeforeRender=t.onBeforeRender,this._onAfterRender=t.onAfterRender,this.scene.add(this.camera),this.update()}update(){void 0!==this.viewportNormalized?(this.viewport.left=Math.floor(this._rendererSize.x*this.viewportNormalized.left),this.viewport.bottom=Math.floor(this._rendererSize.y*this.viewportNormalized.bottom),this.viewport.width=Math.floor(this._rendererSize.x*this.viewportNormalized.width),this.viewport.height=Math.floor(this._rendererSize.y*this.viewportNormalized.height)):(this.viewport.width=this._rendererSize.x,this.viewport.height=this._rendererSize.y)}onBeforeRender(){void 0!==this._onBeforeRender&&this._onBeforeRender()}onAfterRender(){void 0!==this._onAfterRender&&this._onAfterRender()}}class ht{get activeScene(){var t,e;return null!==(e=null===(t=this.activeView)||void 0===t?void 0:t.scene)&&void 0!==e?e:this._activeScene}get activeCamera(){var t,e;return null!==(e=null===(t=this.activeView)||void 0===t?void 0:t.camera)&&void 0!==e?e:this._activeCamera}get activeComposer(){var t,e;return null!==(e=null===(t=this.activeView)||void 0===t?void 0:t.composer)&&void 0!==e?e:this._activeComposer}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t,this.renderer.setClearColor(this._backgroundColor,this._backgroundAlpha)}get backgroundAlpha(){return this._backgroundAlpha}set backgroundAlpha(t){this._backgroundAlpha=t,this.renderer.setClearColor(this._backgroundColor,this._backgroundAlpha)}constructor(t,e,i=0,r=1){this.views=[],this._visibleScenes=new o,this._rendererSize=new g.Vector2,this.renderer=t,this._fullscreen=e,this._backgroundAlpha=r,this._backgroundColor="number"==typeof i?new g.Color(i):i,window.addEventListener("resize",this.onResize.bind(this)),this.updateRenderSize(),this.renderer.setClearColor(this._backgroundColor,this._backgroundAlpha)}add(t){const e=new ot(t,this._rendererSize);return this.views.push(e),e}getByName(t){for(let e=0;e<this.views.length;e++)if(this.views[e].name===t)return this.views[e]}remove(t){const e=this.views.indexOf(t);-1!==e&&this.views.splice(e,1),0===this.views.length&&this.setDefaultRendererParameters()}removeByName(t){for(let e=0;e<this.views.length;e++)if(this.views[e].name===t)return this.views.splice(e,1),void(0===this.views.length&&this.setDefaultRendererParameters())}clear(){this.views=[],this.setDefaultRendererParameters()}setDefaultRendererParameters(){this.renderer.setScissorTest(!1),this.renderer.setViewport(0,0,this._rendererSize.width,this._rendererSize.height),this.renderer.setScissor(0,0,this._rendererSize.width,this._rendererSize.height),this.renderer.setClearColor(this._backgroundColor,this._backgroundAlpha)}getVisibleScenes(){if(0!==this.views.length){this._visibleScenes.clear();for(const t of this.views)!0===t.visible&&this._visibleScenes.push(t.scene);return this._visibleScenes.data}}updateActiveView(t){this.activeView=this.getViewByMouse(t)}getViewByMouse(t){for(let e=this.views.length-1;e>=0;e--){const i=this.views[e],r=i.viewport;if(!0===i.visible&&r.left<=t.x&&r.left+r.width>=t.x&&r.bottom<=t.y&&r.bottom+r.height>=t.y)return i}}getNormalizedMouse(t,e){if(this.updateActiveView(t),void 0!==this.activeView){const i=this.activeView.viewport;return e.set((t.x-i.left)/i.width*2-1,(t.y-i.bottom)/i.height*-2+1)}return e.set(t.x/this.renderer.domElement.clientWidth*2-1,t.y/this.renderer.domElement.clientHeight*-2+1)}render(t,e,i){var r,s;if(this.views.length>0){for(const t of this.views)if(!0===t.visible){const e=t.viewport;this.renderer.setScissorTest(void 0!==t.viewportNormalized),this.renderer.setViewport(e.left,e.bottom,e.width,e.height),this.renderer.setScissor(e.left,e.bottom,e.width,e.height),this.renderer.setClearColor(null!==(r=t.backgroundColor)&&void 0!==r?r:this._backgroundColor,null!==(s=t.backgroundAlpha)&&void 0!==s?s:this._backgroundAlpha),t.onBeforeRender(),this.executeRender(t.scene,t.camera,t.composer),t.onAfterRender()}}else this.executeRender(t,e,i)}executeRender(t,e,i){void 0!==i?i.render():this.renderer.render(t,e)}onResize(){this.updateRenderSize();for(const t of this.views)t.update()}updateRenderSize(){if(!0===this._fullscreen)this.renderer.setSize(window.innerWidth,window.innerHeight);else{const{width:t,height:e}=this.renderer.domElement.getBoundingClientRect();this.renderer.setSize(t,e,!1)}this.renderer.getSize(this._rendererSize)}setActiveScene(t,e,i){this._activeScene=t,this._activeCamera=e,this._activeComposer=i}}class ct{get activeScene(){return this.renderManager.activeScene}get activeCamera(){return this.renderManager.activeCamera}get activeComposer(){return this.renderManager.activeComposer}get showStats(){return this._showStats}set showStats(t){this.setStats(t)}constructor(t,e={}){var i;this.scenes=[],this._clock=new g.Clock,this.renderer=new g.WebGLRenderer(e),this.renderer.setPixelRatio(window.devicePixelRatio),at(this.renderer),this.renderManager=new ht(this.renderer,null===(i=t.fullscreen)||void 0===i||i),this.interactionManager=new G(this.renderManager),this._animate=t.animate,void 0===e.canvas&&document.body.appendChild(this.renderer.domElement),this.setStats(t.showStats),this.addScene(...t.scenes),this.renderer.setAnimationLoop(((t,e)=>{var i;this.interactionManager.update();const r=null!==(i=this.renderManager.getVisibleScenes())&&void 0!==i?i:[this.activeScene];for(const t of r)k.dispatchEvent(t,"animate",{delta:this._clock.getDelta(),total:this._clock.getElapsedTime()}),c(t);this.animate(t,e),this.renderManager.render(this.activeScene,this.activeCamera,this.activeComposer),!0===this._showStats&&this._stats.update()}))}setStats(t){!0===t?(void 0===this._stats&&(this._stats=new rt.default,document.body.appendChild(this._stats.dom)),this._stats.dom.style.display="block"):void 0!==this._stats&&(this._stats.dom.style.display="none"),this._showStats=t}animate(t,e){void 0!==this._animate&&this._animate(t,e)}addScene(...t){if(this.scenes.push(...t),void 0===this.activeScene)for(const e of t[0].children)if(!0===e.isCamera){this.setActiveScene(t[0],e);break}}setActiveScene(t,e,i){this.renderManager.setActiveScene(t,e,i)}}class lt extends g.OrthographicCamera{constructor(t=100,e,i){super(void 0,void 0,void 0,void 0,e,i),this.bindEvent("rendererresize",(e=>{const i=e.width/e.height;this.left=-.5*t*i,this.right=.5*t*i,this.top=t/2,this.bottom=t/-2,this.updateProjectionMatrix()}))}}class dt extends g.PerspectiveCamera{constructor(t,e,i){super(t,void 0,e,i),this.bindEvent("rendererresize",(t=>{this.aspect=t.width/t.height,this.updateProjectionMatrix()}))}}class ut{easeInSine(t){return 1-Math.cos(t*Math.PI/2)}easeOutSine(t){return Math.sin(t*Math.PI/2)}easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}easeInQuad(t){return t*t}easeOutQuad(t){return 1-(1-t)*(1-t)}easeInOutQuad(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}easeInCubic(t){return t*t*t}easeOutCubic(t){return 1-Math.pow(1-t,3)}easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}easeInQuart(t){return t*t*t*t}easeOutQuart(t){return 1-Math.pow(1-t,4)}easeInOutQuart(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}easeInQuint(t){return t*t*t*t*t}easeOutQuint(t){return 1-Math.pow(1-t,5)}easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}easeInExpo(t){return 0===t?0:Math.pow(2,10*t-10)}easeOutExpo(t){return 1===t?1:1-Math.pow(2,-10*t)}easeInOutExpo(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}easeInCirc(t){return 1-Math.sqrt(1-Math.pow(t,2))}easeOutCirc(t){return Math.sqrt(1-Math.pow(t-1,2))}easeInOutCirc(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}easeInBack(t){return 2.70158*t*t*t-1.70158*t*t}easeOutBack(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}easeInOutBack(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}easeInElastic(t){return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*(2*Math.PI)/3)}easeOutElastic(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*(2*Math.PI)/3)+1}easeInOutElastic(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}easeInBounce(t){return 1-this.easeOutBounce(1-t)}easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}easeInOutBounce(t){return t<.5?(1-this.easeOutBounce(1-2*t))/2:(1+this.easeOutBounce(2*t-1))/2}}var _t=a.WY,pt=a.KX,gt=a.w9,vt=a.LK,mt=a.x$,yt=a.Or,bt=a.ZB,ft=a.z2,xt=a.H7,Mt=a.wO,Ct=a.Ex,wt=a.kX,Et=a.SP,zt=a.td,St=a.hP,kt=a.bx,Pt=a.l_,Dt=a.w_,Ot=a.av,jt=a.Ns,It=a.or,At=a.ll,Rt=a.gb,Tt=a.iK,Lt=a.cP,Vt=a.DJ,Bt=a.RR,Ft=a.$C,Ut=a.zo,qt=a.bU,Nt=a.MZ,Kt=a.cQ,Wt=a.tL,Gt=a.N$,Xt=a.Xp,Qt=a.DS,Yt=a.NP,Zt=a.bn,$t=a.uF,Ht=a.EU,Jt=a.Lz,te=a.SZ,ee=a.zh;export{_t as Bind,pt as Binding,gt as BubbleMaterial,vt as CursorHandler,mt as DistinctTargetArray,yt as DragAndDropManager,bt as DragEventExt,ft as Easings,xt as EventExt,Mt as EventsCache,Ct as EventsDispatcher,wt as FocusEventExt,Et as InstancedMesh,zt as InstancedMeshSingle,St as InteractionEventsQueue,kt as InteractionManager,Pt as KeyboardEventExt,Dt as Line2,Ot as LinkedLine,jt as LoadingMaterial,It as Main,At as ManualDetectionMode,Rt as MouseEventExt,Tt as OrthographicCamera,Lt as PerspectiveCamera,Vt as PointerEventExt,Bt as PointerIntersectionEvent,Ft as RaycasterManager,Ut as RenderManager,qt as RenderView,Nt as RendererResizeEvent,Kt as Utils,Wt as WheelEventExt,Gt as addDropTargetToScene,Xt as applyEulerPatch,Qt as applyMatrix4Patch,Yt as applyObject3DRotationPatch,Zt as applyObject3DVector3Patch,$t as applyQuaternionPatch,Ht as applyVector3Patch,Jt as applyWebGLRendererPatch,te as computeAutoBinding,ee as object3DList};